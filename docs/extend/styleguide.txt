===============
Code Styleguide
===============

In order to keep everybody happy we have a strict code styleguide.  This
styleguide must be applied to all core plugins and the core core and should
be applied to third party plugins too.

This page covers the most important details.  If you are unsure the best thing
is to look at existing code for some ideas.

Names
=====

We have two different name styles.  `CamelCase` for classes, `UPPER_CASE`
for constants and `lower_case_with_underlines` for everything else.  If you
have something you want to mark as private, prefix it with an underline.

If you have class names that include acronyms leave them as uppercase
(``XMLParser`` for example).

Indentation
===========

Indent always with four spaces a level.  No tabs and no other indention sizes.
End of Line is Column 79!  If you have lines longer than that and you are
unable to wrap you probably have a problem with your code anyway.  If you
reach 84 it won't be a big problem, but you should avoid it.

Spaces
======

So where to put the rest of the whitespace?  Here some good examples for
whitespace usage::

    class Foo(object):

        def __init__(self, foo, bar, baz):
            self.foo = foo
            self.bar = bar or []
            self.baz = baz

        def __iter__(self):
            yield self.foo
            for item in self.bar:
                yield item
            yield self.baz


    class Bar(Foo):

        def __init__(self):
            Foo.__init__(self, 1, [2, 3], 4)

So two newlines before a class, and one newline before a method or a function.

Docstrings
==========

Classes always have multipline docstrings, functions can have singleline
docstrings if it's still possible to achieve EOL 79.  All the markup in the
docstrings must be reStructuredText.  Here some examples::

    class Foo(object):
        """
        A class named after a placeholder word.
        """

        def __unicode__(self):
            """Get the unicode representation of `Foo`."""
            return u'Foo'

        def __str__(self):
            """
            The string representation of `Foo`.  The return value will be the
            output of `__unicode__` in utf-8 encoding.  Encoding errors are
            silenced.
            """
            return unicode(self).encode('utf-8', 'ignore')

Other Things
============

Use newstyle classes only (classes inheriting from `object` or a subclass of
it).  Use `super` only if the function signature does not change in an
incompatible way.  Always use absolute imports
(``from textpress.plugins.foo import bar``) and not just (``import bar``).  It
may be more to type but is supported by Python 2.4 up to 2.6 and will simplify
the transition to Python 3.
